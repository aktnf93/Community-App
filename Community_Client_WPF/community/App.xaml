<Application x:Class="community.App"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:local="clr-namespace:community"
             xmlns:v="clr-namespace:community.Views"
             xmlns:vm="clr-namespace:community.ViewModels"
             xmlns:u="clr-namespace:community.View_Controls"
             xmlns:cnv="clr-namespace:community.View_Converters"
             StartupUri="Views/V_MainWindow.xaml"
             ShutdownMode="OnLastWindowClose">
    <Application.Resources>

        <!--#region Converters-->
        <cnv:C_PageNumberButton x:Key="PageNumberToIsCheckedMultiConverter"/>
        <cnv:C_EnumMenuButton x:Key="EnumToBoolConverter"/>
        
        <!--#endregion-->



        <!--#region Images-->
        <BitmapImage x:Key="Img_Login_Logo" UriSource="Images\Login\image_login.png"/>
        <BitmapImage x:Key="Img_Login_ID" UriSource="Images\Login\icon_username_24px.png" DecodePixelWidth="24"/>
        <BitmapImage x:Key="Img_Login_PW" UriSource="Images\Login\icon_password_24px.png" DecodePixelWidth="24"/>
        <BitmapImage x:Key="Img_Login_Logout" UriSource="Images\Login\icon_logout_24px.png" DecodePixelWidth="24"/>

        <BitmapImage x:Key="Img_Window_Close" UriSource="Images\Window\close.png" DecodePixelWidth="24"/>
        <BitmapImage x:Key="Img_Window_Max" UriSource="Images\Window\maximize.png" DecodePixelWidth="24"/>
        <BitmapImage x:Key="Img_Window_Min" UriSource="Images\Window\minimize.png" DecodePixelWidth="24"/>

        <!--#endregion-->

        <!--#region Colors-->
        <SolidColorBrush x:Key="Color_DarkWhite" Color="#FAFAFB"/>
        <SolidColorBrush x:Key="Color_White" Color="#FFFFFF"/>
        <SolidColorBrush x:Key="Color_Gray" Color="#808080"/>
        <SolidColorBrush x:Key="Color_DarkGray" Color="#3C3C3C"/>

        <SolidColorBrush x:Key="Color_DeepdarkBlue" Color="#313647"/>
        <SolidColorBrush x:Key="Color_DarkBlue" Color="#384992"/>
        <SolidColorBrush x:Key="Color_Blue" Color="#3E51A3"/>
        <SolidColorBrush x:Key="Color_LightBlue" Color="#6883D5"/>

        <SolidColorBrush x:Key="Color_Transparent" Color="Transparent"/>
        <SolidColorBrush x:Key="Color_Grean" Color="#51B374"/>


        <SolidColorBrush x:Key="TextBox_BorderBrush" Color="#808080"/>
        <SolidColorBrush x:Key="TextBox_Background" Color="#FFFFFF"/>
        <SolidColorBrush x:Key="TextBox_PlaceholderText" Color="#808080"/>
        <SolidColorBrush x:Key="Menu_Foreground_Blue" Color="#6883D5"/>
        <SolidColorBrush x:Key="Menu_Background_Blue" Color="#3E51A3"/>
        <SolidColorBrush x:Key="Menu_Foreground_Selection" Color="#FFFFFF"/>
        <SolidColorBrush x:Key="Menu_Background_Selection" Color="#384992"/>
        <SolidColorBrush x:Key="Menu_Foreground_MouseOver" Color="#FFFFFF"/>
        <SolidColorBrush x:Key="Menu_Background_MouseOver" Color="#6F93CE"/>
        <SolidColorBrush x:Key="View_Background" Color="#FFFFFF"/>
        <SolidColorBrush x:Key="Panel_Background" Color="#FAFAFB"/>
        <SolidColorBrush x:Key="Button_Foreground_Transparent" Color="#3C3C3C"/>
        <SolidColorBrush x:Key="Button_Background_Transparent" Color="Transparent"/>
        <SolidColorBrush x:Key="Button_Foreground_White" Color="#3C3C3C"/>
        <SolidColorBrush x:Key="Button_Background_White" Color="#F3F4F6"/>
        <SolidColorBrush x:Key="Button_Foreground_Blue" Color="#FFFFFF"/>
        <SolidColorBrush x:Key="Button_Background_Blue" Color="#346ECD"/>
        <SolidColorBrush x:Key="Button_Foreground_Grean" Color="#FFFFFF"/>
        <SolidColorBrush x:Key="Button_Background_Grean" Color="#51B374"/>
        <SolidColorBrush x:Key="Button_Foreground_MouseOver" Color="#FFFFFF"/>
        <SolidColorBrush x:Key="Button_Background_MouseOver" Color="#6F93CE"/>
        
        <!--#endregion-->

        <!-- Display # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # -->

        <!--#region Line Point Progress Bar-->
        <Style TargetType="{x:Type ProgressBar}" x:Key="LinePoint_ProgressBar">
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="{x:Type ProgressBar}">
                        <Grid x:Name="Root">
                            <!-- 회색 배경 -->
                            <Border Background="#DDD" CornerRadius="2" Height="6" VerticalAlignment="Center"/>

                            <!-- 진행된 영역 -->
                            <Rectangle x:Name="TrackFill" Fill="#4CAF50" Width="0" Height="6" HorizontalAlignment="Left" VerticalAlignment="Center"/>

                            <!-- 동그라미 Thumb -->
                            <Ellipse x:Name="Thumb" Width="18" Height="18" Fill="White" Stroke="#4CAF50" StrokeThickness="1"
                                     HorizontalAlignment="Left" VerticalAlignment="Center" Margin="-9,0,0,0"/>
                        </Grid>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
        <!--#endregion-->

        <!--#region Status : Employee-->
        <Style TargetType="{x:Type ContentControl}" x:Key="Employee_Status">
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="{x:Type ContentControl}">
                        <Border x:Name="Outer" CornerRadius="8" Background="#EEE">
                            <TextBlock x:Name="StatusText" Text="알 수 없음" Foreground="Black" HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        </Border>

                        <ControlTemplate.Triggers>
                            <DataTrigger Binding="{Binding Status}" Value="1">
                                <Setter TargetName="Outer" Property="Background" Value="#DFFFD6"/>
                                <Setter TargetName="StatusText" Property="Text" Value="활동 중"/>
                                <Setter TargetName="StatusText" Property="Foreground" Value="Green"/>
                            </DataTrigger>
                            <DataTrigger Binding="{Binding Status}" Value="2">
                                <Setter TargetName="Outer" Property="Background" Value="#FFF3CD"/>
                                <Setter TargetName="StatusText" Property="Text" Value="휴직 중"/>
                                <Setter TargetName="StatusText" Property="Foreground" Value="DarkOrange"/>
                            </DataTrigger>
                            <DataTrigger Binding="{Binding Status}" Value="3">
                                <Setter TargetName="Outer" Property="Background" Value="#F8D7DA"/>
                                <Setter TargetName="StatusText" Property="Text" Value="퇴사"/>
                                <Setter TargetName="StatusText" Property="Foreground" Value="Red"/>
                            </DataTrigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
        <!--#endregion-->


        <!-- Button # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # -->
        
        <!--#region Borderless Text Button-->
        <ControlTemplate TargetType="{x:Type Button}" x:Key="Borderless_TextButton">
            <Border x:Name="Border" Background="{StaticResource Button_Background_White}" 
                    CornerRadius="4" Cursor="Hand">
                <ContentPresenter x:Name="Button_Text" Content="{TemplateBinding Content}"
                                  HorizontalAlignment="Center" VerticalAlignment="Center"
                                  TextBlock.Foreground="{StaticResource Button_Foreground_White}"/>
            </Border>
            <ControlTemplate.Triggers>
                <Trigger Property="Tag" Value="0">
                    <Setter TargetName="Border" Property="Background" Value="{StaticResource Button_Background_Blue}"/>
                    <Setter TargetName="Button_Text" Property="TextBlock.Foreground" Value="{StaticResource Button_Foreground_Blue}"/>
                </Trigger>

                <Trigger Property="Tag" Value="1">
                    <Setter TargetName="Border" Property="Background" Value="{StaticResource Button_Background_Grean}"/>
                    <Setter TargetName="Button_Text" Property="TextBlock.Foreground" Value="{StaticResource Button_Foreground_Grean}"/>
                </Trigger>

                <Trigger Property="Tag" Value="3">
                    <Setter TargetName="Border" Property="Background" Value="{StaticResource Button_Background_Transparent}"/>
                    <Setter TargetName="Button_Text" Property="TextBlock.Foreground" Value="{StaticResource Button_Foreground_Transparent}"/>
                </Trigger>

                <Trigger Property="IsMouseOver" Value="True">
                    <Setter TargetName="Border" Property="Background" Value="{StaticResource Button_Background_MouseOver}"/>
                    <Setter TargetName="Button_Text" Property="TextBlock.Foreground" Value="{StaticResource Button_Foreground_MouseOver}"/>
                </Trigger>
            </ControlTemplate.Triggers>
        </ControlTemplate>
        <!--#endregion-->

        <!--#region Borderless Icon Button-->
        <ControlTemplate TargetType="{x:Type Button}" x:Key="IconButton">
            <Border x:Name="Border" Background="{StaticResource Color_Transparent}" 
                    Cursor="Hand">
                <Grid>
                    <!-- 아이콘 -->
                    <Image Source="{TemplateBinding Tag}" 
                           HorizontalAlignment="Center" VerticalAlignment="Center"/>

                    <!--<ContentPresenter x:Name="Button_Text" Content="{TemplateBinding Content}"
                                      HorizontalAlignment="Center" VerticalAlignment="Center"
                                      TextBlock.Foreground="{StaticResource Button_Foreground_White}"/>-->
                </Grid>
            </Border>
            <ControlTemplate.Triggers>
                <Trigger Property="IsMouseOver" Value="True">
                    <Setter TargetName="Border" Property="Background" Value="{StaticResource Color_LightBlue}"/>
                    <!--<Setter TargetName="Button_Text" Property="TextBlock.Foreground" Value="{StaticResource Button_Foreground_MouseOver}"/>-->
                </Trigger>
            </ControlTemplate.Triggers>
        </ControlTemplate>
        <!--#endregion-->

        <!--#region Menu Button(Radio Button)-->
        <ControlTemplate TargetType="{x:Type RadioButton}" x:Key="MenuButton">
            <Border x:Name="Border" Height="40" Cursor="Hand" Background="{StaticResource Menu_Background_Blue}">
                <StackPanel Orientation="Horizontal">
                    <ContentPresenter x:Name="Button_Text" HorizontalAlignment="Center" VerticalAlignment="Center"
                                      TextBlock.Foreground="{StaticResource Menu_Foreground_Blue}"/>
                </StackPanel>
            </Border>

            <ControlTemplate.Triggers>
                <Trigger Property="IsChecked" Value="True">
                    <Setter TargetName="Border" Property="Background" Value="{StaticResource Menu_Background_Selection}"/>
                    <Setter TargetName="Button_Text"  Property="TextBlock.Foreground" Value="{StaticResource Menu_Foreground_Selection}"/>
                </Trigger>

                <Trigger Property="IsMouseOver" Value="True">
                    <Setter TargetName="Border" Property="Background" Value="{StaticResource Menu_Background_MouseOver}"/>
                    <Setter TargetName="Button_Text"  Property="TextBlock.Foreground" Value="{StaticResource Menu_Foreground_MouseOver}"/>
                </Trigger>
            </ControlTemplate.Triggers>
        </ControlTemplate>
        <!--#endregion-->

        <!--#region Audio Player Button-->
        <ControlTemplate TargetType="{x:Type Button}" x:Key="ButtonTemplate">
            <Border x:Name="bor" Width="{TemplateBinding Width}" Height="{TemplateBinding Height}"
                    Background="#FF1A237E"
                    BorderBrush="Gray" BorderThickness="0.5" CornerRadius="3">
                <Grid>
                    <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"
                                      TextBlock.FontWeight="Bold"
                                      TextBlock.Foreground="White"/>
                </Grid>
            </Border>

            <ControlTemplate.Triggers>
                <Trigger Property="IsMouseOver" Value="True">
                    <Setter TargetName="bor" Property="Background" Value="#FFB22222"/>
                </Trigger>
                <Trigger Property="IsPressed" Value="True">
                    <Setter TargetName="bor" Property="Background" Value="#FFB22222"/>
                    <Setter Property="Foreground" Value="White"/>
                </Trigger>
            </ControlTemplate.Triggers>
        </ControlTemplate>
        <!--#endregion-->

        <!--#region Page Button-->
        <ControlTemplate TargetType="{x:Type RadioButton}" x:Key="RadioTemplate">
            <Border x:Name="bor" Width="30" Height="24"
                    Background="#FF1A237E"
                    BorderBrush="Gray" BorderThickness="0.5" CornerRadius="3">
                <Grid>
                    <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"
                                      TextBlock.FontWeight="Bold"
                                      TextBlock.Foreground="White"/>
                </Grid>
            </Border>

            <ControlTemplate.Triggers>
                <Trigger Property="IsChecked" Value="True">
                    <Setter TargetName="bor" Property="Background" Value="#FFB22222"/>
                    <Setter Property="Foreground" Value="White"/>
                </Trigger>
                <Trigger Property="IsMouseOver" Value="True">
                    <Setter TargetName="bor" Property="BorderBrush" Value="#FFB22222"/>
                </Trigger>
            </ControlTemplate.Triggers>
        </ControlTemplate>
        <!--#endregion-->


        <!-- Text Box # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # -->
        
        <!--#region 아이콘 텍스트박스 -->
        <ControlTemplate TargetType="{x:Type TextBox}" x:Key="Icon_TextBox">
            <Border x:Name="Border" BorderBrush="Gray" BorderThickness="1" CornerRadius="2" Background="White">
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>

                    <!-- 아이콘 -->
                    <Image Source="{TemplateBinding Tag}" Width="16" Height="16" Margin="8,0,4,0" VerticalAlignment="Center"/>

                    <!-- 입력 영역 -->
                    <Grid Grid.Column="1">
                        <ScrollViewer x:Name="PART_ContentHost" Margin="0" VerticalAlignment="Center"/>

                        <!-- Placeholder 텍스트 -->
                        <TextBlock x:Name="PlaceholderText" Text="{TemplateBinding ToolTip}" 
                                   Foreground="Gray" Margin="4,0,0,0" VerticalAlignment="Center" IsHitTestVisible="False" Visibility="Collapsed"/>
                    </Grid>
                </Grid>
            </Border>

            <ControlTemplate.Triggers>
                <Trigger Property="Text" Value="">
                    <Setter TargetName="PlaceholderText" Property="Visibility" Value="Visible"/>
                </Trigger>
                <Trigger Property="IsKeyboardFocused" Value="True">
                    <Setter TargetName="Border" Property="BorderBrush" Value="DodgerBlue"/>
                </Trigger>
                <Trigger Property="IsEnabled" Value="False">
                    <Setter Property="Foreground" Value="DarkGray"/>
                    <Setter TargetName="Border" Property="BorderBrush" Value="Gray"/>
                </Trigger>
            </ControlTemplate.Triggers>
        </ControlTemplate>
        <!--#endregion-->

        <!--#region 아이콘 패스워드박스-->
        <ControlTemplate TargetType="{x:Type PasswordBox}" x:Key="Icon_PasswordBox">
            <Border x:Name="Border" BorderBrush="Gray" BorderThickness="1" CornerRadius="2" Background="White">
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>

                    <!-- 아이콘 -->
                    <Image Source="{TemplateBinding Tag}" Width="16" Height="16" Margin="8,0,4,0" VerticalAlignment="Center"/>

                    <!-- 입력 영역 + Placeholder -->
                    <Grid Grid.Column="1">
                        <ScrollViewer x:Name="PART_ContentHost" Margin="0" VerticalAlignment="Center"/>

                        <!-- Placeholder 텍스트 -->
                        <TextBlock x:Name="PlaceholderText" Text="{TemplateBinding ToolTip}" 
                                   Foreground="Gray" Margin="4,0,0,0" VerticalAlignment="Center" IsHitTestVisible="False" Visibility="Collapsed"/>
                    </Grid>
                </Grid>
            </Border>

            <ControlTemplate.Triggers>
                <Trigger Property="u:PasswordBoxHelper.Password" Value="">
                    <Setter TargetName="PlaceholderText" Property="Visibility" Value="Visible"/>
                </Trigger>
                <Trigger Property="IsKeyboardFocused" Value="True">
                    <Setter TargetName="Border" Property="BorderBrush" Value="DodgerBlue"/>
                </Trigger>
                <Trigger Property="IsEnabled" Value="False">
                    <Setter TargetName="Border" Property="BorderBrush" Value="Gray"/>
                </Trigger>
            </ControlTemplate.Triggers>
        </ControlTemplate>
        <!--#endregion-->


        <!-- List View # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # -->

        <!--#region Tree View-->
        <Style TargetType="{x:Type TreeViewItem}" x:Key="TreeView">
            <Setter Property="IsSelected" Value="{Binding IsSelected, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />
            <Setter Property="IsExpanded" Value="{Binding IsExpanded, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="{x:Type TreeViewItem}">
                        <StackPanel Orientation="Vertical">
                            <Grid x:Name="Parent" Height="40" Cursor="Hand" Background="{StaticResource Menu_Background_Blue}">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="30"/>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="20"/>
                                </Grid.ColumnDefinitions>

                                <Image Grid.Column="0" x:Name="MenuIcon" Source="{Binding Icon}" Width="20" Height="20"/>
                                <ContentPresenter x:Name="Button_Text" Grid.Column="1" ContentSource="Header" HorizontalAlignment="Left" VerticalAlignment="Center"
                                                  TextBlock.Foreground="{StaticResource Menu_Foreground_Blue}"/>

                                <Image Grid.Column="2" x:Name="Expander" Source="/Resource_Icon/arrow_down_24px.png" Visibility="Collapsed" HorizontalAlignment="Center" VerticalAlignment="Center"/>
                            </Grid>

                            <ItemsPresenter x:Name="Child" Margin="0,0,0,0" Visibility="Collapsed"/>
                        </StackPanel>

                        <ControlTemplate.Triggers>
                            <!-- 루트 메뉴가 아니면 아이콘 삭제 -->
                            <DataTrigger Binding="{Binding Depth}" Value="1">
                                <Setter TargetName="MenuIcon" Property="Visibility" Value="Collapsed"/>
                            </DataTrigger>

                            <!-- 자식 요소가 있으면 하위식별 표시 -->
                            <Trigger Property="HasItems" Value="True">
                                <Setter TargetName="Expander" Property="Visibility" Value="Visible"/>
                            </Trigger>

                            <!-- 자식 요소를 펼치기 -->
                            <Trigger Property="IsExpanded" Value="True">
                                <Setter TargetName="Expander" Property="Source" Value="/Resource_Icon/arrow_up_24px.png"/>
                                <Setter TargetName="Child" Property="Visibility" Value="Visible"/>
                            </Trigger>

                            <!-- 선택하면 패널 색상 변경 -->
                            <Trigger Property="IsSelected" Value="True">
                                <Setter TargetName="Parent" Property="Background" Value="{StaticResource Menu_Background_Selection}"/>
                                <Setter TargetName="Button_Text"  Property="TextBlock.Foreground" Value="{StaticResource Menu_Foreground_Selection}"/>
                            </Trigger>

                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter TargetName="Parent" Property="Background" Value="{StaticResource Menu_Background_MouseOver}"/>
                                <Setter TargetName="Button_Text"  Property="TextBlock.Foreground" Value="{StaticResource Menu_Foreground_MouseOver}"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
        <!--#endregion-->


        <!--#region View Maping-->
        <DataTemplate DataType="{x:Type vm:VM_Login}">
            <v:V_Login/>
        </DataTemplate>
        <DataTemplate DataType="{x:Type vm:VM_Post}">
            <v:V_Post/>
        </DataTemplate>
        <DataTemplate DataType="{x:Type vm:VM_Chat}">
            <v:V_Chat/>
        </DataTemplate>
        <DataTemplate DataType="{x:Type vm:VM_Project}">
            <v:V_Project/>
        </DataTemplate>
        <DataTemplate DataType="{x:Type vm:VM_Customer}">
            <v:V_Customer/>
        </DataTemplate>
        <DataTemplate DataType="{x:Type vm:VM_Product}">
            <v:V_Product/>
        </DataTemplate>
        <DataTemplate DataType="{x:Type vm:VM_Employee}">
            <v:V_Employee/>
        </DataTemplate>
        <DataTemplate DataType="{x:Type vm:VM_System}">
            <v:V_System/>
        </DataTemplate>
        <!--#endregion-->

    </Application.Resources>
</Application>
