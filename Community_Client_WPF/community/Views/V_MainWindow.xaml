<Window x:Class="community.Views.V_MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:community.Views"
        xmlns:vm="clr-namespace:community.ViewModels"
        mc:Ignorable="d"
        Title="Community App" 
        Width="1600" Height="900" MaxWidth="1920" MaxHeight="1040"
        WindowStyle="None" AllowsTransparency="False"
        WindowStartupLocation="CenterScreen"
        StateChanged="Window_OnStateChanged"
        SizeChanged="Window_OnSizeChanged"
        FocusVisualStyle="{x:Null}"
        Cursor="{StaticResource Cur_Normal}"
        FontFamily="Spoqa Han Sans Neo" Foreground="#262626"
        Language="ko-KR"
        >
    <WindowChrome.WindowChrome>
        <WindowChrome CaptionHeight="0" ResizeBorderThickness="5"/>
    </WindowChrome.WindowChrome>
    <Window.DataContext>
        <vm:VM_MainViewModel/>
    </Window.DataContext>

    <Grid Background="{StaticResource Color_ThinBlack}">
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="Auto"/>
            <ColumnDefinition Width="*"/>
        </Grid.ColumnDefinitions>
        <Grid.RowDefinitions>
            <RowDefinition Height="40"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <!-- 타이틀 바 -->
        <Grid Grid.Column="1" Grid.ColumnSpan="1" Grid.Row="0" Background="{StaticResource Color_White}">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="170"/>
                <ColumnDefinition Width="50"/>
                <ColumnDefinition Width="50"/>
                <ColumnDefinition Width="50"/>
                <ColumnDefinition Width="50"/>
                <ColumnDefinition Width="50"/>
            </Grid.ColumnDefinitions>
            
            <Border x:Name="TitleBar" Grid.Column="0" Grid.ColumnSpan="4" PreviewMouseLeftButtonDown="Window_OnMove" MouseLeftButtonDown="Window_OnResize" Background="Transparent"/>

            <StackPanel Orientation="Horizontal" Grid.Column="0">
                <StackPanel.Resources>
                    <Style TargetType="{x:Type TextBlock}">
                        <Setter Property="FontSize" Value="13"/>
                        <Setter Property="VerticalAlignment" Value="Center"/>
                        <Setter Property="IsHitTestVisible" Value="False"/>
                        <Setter Property="Margin" Value="0,0,10,0"/>
                    </Style>
                </StackPanel.Resources>
                <Image Source="{StaticResource Img_Window_Logo2}" HorizontalAlignment="Left" Margin="10,6,10,6" IsHitTestVisible="False" RenderOptions.BitmapScalingMode="Fant"/>
                <TextBlock Text="SH ELECTRONIC" FontWeight="Bold" Foreground="#161D87"/>
                <TextBlock Text="그룹웨어 시스템" Foreground="#5F68E4"/>
                <TextBlock Text="v1.0.18-2025-12-03-11-13" Foreground="#404040"/>
            </StackPanel>

            <!--<TextBlock Grid.Column="1" Text="{Binding CurrentDateTime, StringFormat={}{0:yyyy-MM-dd HH:mm:ss}, FallbackValue=2025-11-19 14:57:55}" FontSize="16" HorizontalAlignment="Center" VerticalAlignment="Center" IsHitTestVisible="False"/>
            <Image Grid.Column="2" Source="{StaticResource Img_Alarm}" Margin="6"/>-->
            <Button Grid.Column="3" ToolTip="TEST" Click="Button_Click" Template="{StaticResource IconButton}"/>
            <Button Grid.Column="4" ToolTip="최소화" Click="Window_OnMinimize" Template="{StaticResource IconButton}" Content="{StaticResource Img_Window_Min}"/>
            <Button Grid.Column="5" ToolTip="최대화" Click="Window_OnMaximize" Template="{StaticResource IconButton}" Content="{StaticResource Img_Window_Max}"/>
            <Button Grid.Column="6" ToolTip="닫기"   Click="Window_OnClose" Template="{StaticResource IconButton}" Content="{StaticResource Img_Window_Close}"/>
        </Grid>

        <!-- 왼쪽 메뉴 패널 -->
        <Border Grid.Column="0" Grid.Row="1" Width="110">
            <Border.Style>
                <Style TargetType="{x:Type Border}">
                    <Setter Property="Visibility" Value="Visible"/>
                    <Style.Triggers>
                        <DataTrigger Binding="{Binding MenuSelected}" Value="0">
                            <Setter Property="Visibility" Value="Collapsed"/>
                        </DataTrigger>
                    </Style.Triggers>
                </Style>
            </Border.Style>

            <StackPanel Margin="0,50,0,0">
                <!--<Grid Height="130" DataContext="{Binding CurrentUser}">
                    <Ellipse Grid.Column="0" Grid.ColumnSpan="3" Grid.Row="0" Width="70" Height="70" HorizontalAlignment="Center" VerticalAlignment="Top" Margin="0,20,0,0">
                        <Ellipse.Fill>
                            <ImageBrush ImageSource="{Binding Image_FullPath}" Stretch="Uniform" RenderOptions.BitmapScalingMode="Fant"/>
                        </Ellipse.Fill>
                    </Ellipse>

                    <TextBlock Foreground="{StaticResource Color_White}" HorizontalAlignment="Center" VerticalAlignment="Bottom" Margin="0,0,0,10">
                        <Run Text="{Binding Id, StringFormat={}{0}: , Mode=OneWay, UpdateSourceTrigger=PropertyChanged}"/>
                        <Run Text="{Binding Name, Mode=OneWay, UpdateSourceTrigger=PropertyChanged}"/>
                    </TextBlock>

                    <Line VerticalAlignment="Bottom" X1="0" X2="100" Stretch="Fill" StrokeThickness="0.5" Stroke="Gray"/>
                </Grid>-->
                
                <RadioButton Content="홈"       Tag="{StaticResource Img_Menu_Home}"      Template="{StaticResource MenuButton}" IsChecked="{Binding MenuSelected, Converter={StaticResource Converter_Bool_Int}, ConverterParameter=1}"/>
                <RadioButton Content="게시판"   Tag="{StaticResource Img_Menu_Post}"     Template="{StaticResource MenuButton}" IsChecked="{Binding MenuSelected, Converter={StaticResource Converter_Bool_Int}, ConverterParameter=2}"/>
                <RadioButton Content="채팅방"   Tag="{StaticResource Img_Menu_Chat}"     Template="{StaticResource MenuButton}" IsChecked="{Binding MenuSelected, Converter={StaticResource Converter_Bool_Int}, ConverterParameter=3}"/>
                <RadioButton Content="프로젝트" Tag="{StaticResource Img_Menu_Project}"  Template="{StaticResource MenuButton}" IsChecked="{Binding MenuSelected, Converter={StaticResource Converter_Bool_Int}, ConverterParameter=4}"/>
                <RadioButton Content="거래처" Tag="{StaticResource Img_Menu_Customer}" Template="{StaticResource MenuButton}" IsChecked="{Binding MenuSelected, Converter={StaticResource Converter_Bool_Int}, ConverterParameter=5}"/>
                <!--<RadioButton Content="재고관리" Tag="{StaticResource Img_Menu_Product}"  Template="{StaticResource MenuButton}" IsChecked="{Binding MenuSelected, Converter={StaticResource Converter_Bool_Int}, ConverterParameter=6}"/>-->
                <RadioButton Content="직원관리" Tag="{StaticResource Img_Menu_Employee}" Template="{StaticResource MenuButton}" IsChecked="{Binding MenuSelected, Converter={StaticResource Converter_Bool_Int}, ConverterParameter=7}"/>
                <RadioButton Content="환경설정" Tag="{StaticResource Img_Menu_System}"   Template="{StaticResource MenuButton}" IsChecked="{Binding MenuSelected, Converter={StaticResource Converter_Bool_Int}, ConverterParameter=8}"/>
                <!--<RadioButton Content="시설관리" Tag="{StaticResource Img_Menu_System}"   Template="{StaticResource MenuButton}" IsChecked="{Binding MenuSelected, Converter={StaticResource Converter_Bool_Int}, ConverterParameter=9}"/>-->
                <!--<RadioButton Content="TEST"     Tag="{StaticResource Img_Menu_System}"   Template="{StaticResource MenuButton}" IsChecked="{Binding MenuSelected, Converter={StaticResource Converter_Bool_Int}, ConverterParameter=9}"/>-->
            </StackPanel>
        </Border>
            
        <!-- 오른쪽 메뉴 화면 -->
                 <!--TextOptions.TextFormattingMode="Display"
                 TextOptions.TextRenderingMode="ClearType"
                 UseLayoutRounding="True"-->
        <Viewbox Grid.Column="1" Grid.Row="1" 
                 Stretch="Fill"
                 >
            <local:ViewCacheHost Content="{Binding CurrentViewModel}">
                <!--<local:ViewCacheHost.LayoutTransform>
                    <ScaleTransform x:Name="RootScale"/>
                </local:ViewCacheHost.LayoutTransform>-->
            </local:ViewCacheHost>
        </Viewbox>
    </Grid>
</Window>
